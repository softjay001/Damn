<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Charitynest Mobile</title>
    <style>
        /* Mobile-optimized CSS */
        body {
            font-family: -apple-system, BlinkMacSystemFont, sans-serif;
            padding: 20px;
            max-width: 500px;
            margin: 0 auto;
        }
        .btn {
            background: #4a90e2;
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 8px;
            font-size: 16px;
            width: 100%;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <button id="connectBtn" class="btn">Connect Wallet</button>
    <div id="walletInfo" style="display: none;">
        <p>Connected: <span id="walletAddress"></span></p>
    </div>

    <!-- Load Ethers.js FIRST -->
    <script src="https://cdn.ethers.io/lib/ethers-5.2.umd.min.js"></script>
    
    <script>
        // Configuration
        const config = {
            charityAddress: "0xYourCharityAddressHere",
            tokenAddress: "0xYourTokenAddressHere"
        };

        // DOM Elements
        const connectBtn = document.getElementById('connectBtn');
        const walletInfo = document.getElementById('walletInfo');
        const walletAddress = document.getElementById('walletAddress');

        // Wallet Connection
        async function connectWallet() {
            try {
                // Check for mobile wallets
                const provider = detectMobileWallet();
                
                if (!provider) {
                    alert("Please open in Trust Wallet or MetaMask mobile browser");
                    return;
                }

                // Initialize Ethers
                const ethersProvider = new ethers.providers.Web3Provider(provider);
                const accounts = await ethersProvider.send("eth_requestAccounts", []);
                
                // Update UI
                walletAddress.textContent = `${accounts[0].slice(0,6)}...${accounts[0].slice(-4)}`;
                walletInfo.style.display = "block";
                connectBtn.textContent = "Connected";
                
                console.log("Connected:", accounts[0]);
            } catch (error) {
                console.error("Connection failed:", error);
                alert(`Connection error: ${error.message}`);
            }
        }

        // Detect mobile wallet providers
        function detectMobileWallet() {
            // Trust Wallet
            if (window.trustwallet) {
                return window.trustwallet;
            }
            // MetaMask Mobile
            if (window.ethereum) {
                return window.ethereum;
            }
            return null;
        }

        // Event Listeners
        connectBtn.addEventListener('click', connectWallet);

        // Initialize
        if (window.ethereum || window.trustwallet) {
            connectBtn.textContent = "Connect Wallet (Mobile)";
        } else {
            connectBtn.textContent = "Install Wallet First";
            connectBtn.disabled = true;
        }
    </script>
</body>
</html>
